<p-fieldset legend="Văn Thư" [style]="{overflow: 'auto', height:'87vh'}">
  <p-toast></p-toast>
  <p-fieldset legend="Thông tin người nhập">
    <div class="grid">
      <div class="col-4 grid">
        <div class="col-4"><label>Cơ Quan<span class="red-text">*</span></label></div>
        <div class="col-8">
<!--          <p-dropdown [options]="listDonVi" [(ngModel)]="selectedReceiveUnit" (onChange)="loadnhan()" [showClear]="true"-->
<!--                      placeholder="-&#45;&#45;Vui lòng chọn-&#45;&#45;"-->
<!--                      optionLabel="name"></p-dropdown>-->
          <p-dropdown [options]="listDonVi" [(ngModel)]="selectedReceiveUnit"
                      (onChange)="loadnhan()"
                      optionLabel="name" [filter]="true" filterBy="name"
                      [showClear]="true" placeholder="--Vui lòng chọn--">
            <ng-template pTemplate="selectedItem">
              <div *ngIf="selectedReceiveUnit">
                <div>{{selectedReceiveUnit.name}}</div>
              </div>
            </ng-template>
            <ng-template let-data pTemplate="item">
              <div>{{data.name}}</div>
            </ng-template>
          </p-dropdown>

        </div>
      </div>
      <div class="col-4 grid">
        <div class="col-4 "><label>Năm</label></div>
        <div class="col-8">
          <p-dropdown [options]="years" [(ngModel)]="selectionYear" (onChange)="loadnhan()"
                      placeholder="---Vui lòng chọn---"
                      optionLabel="year"></p-dropdown>
        </div>
      </div>
      <div class="col-4 grid">
        <div class="col-4"><label>Người Yếu Cầu</label></div>
        <div class="col-8">
          <input [(ngModel)]="keyword" type="text" class="-full" pInputText placeholder="Nội Dung Tìm Kiếm"/>
        </div>
      </div>
      <div class="col-4 grid"></div>
      <div class="col-4 grid"></div>
      <div class="col-4 grid">
        <div class="col-4"></div>
        <div class="col-8">
          <button class="tool"
                  icon="pi pi-search"
                  pButton type="button"
                  (click)="onSearch()"
                  label="Tìm Kiếm"></button>
        </div>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <p-table [value]="listThuMoi"
                 selectionMode="single"
                 [(selection)]="selectedRowLetter"
                 (onRowSelect)="onRowSelect($event)"
                 [paginator]="true"
                 [rows]="10"
                 [metaKeySelection]="true"
                 [resizableColumns]="true"
                 columnResizeMode="expand"
                 styleClass="p-datatable-gridlines"
                 [style]="{'width':'92vw'}"
                 responsiveLayout="scroll">
          <ng-template pTemplate="caption">
            <div class="grid">
              <div class="col-12 flex justify-content-end">
                <label>Ps <span class="red-text">*</span>: Nhấn 2 lần trên bảng để lấy dữ liệu</label>
              </div>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
            <tr>
              <th>Phân loại thư</th>
              <th>Sổ thư đi</th>
              <th>Mã thư đi</th>
              <th>Ngày nhập</th>
              <th>Ngày Gửi</th>
              <th>Đơn vị trực thuộc gửi</th>
              <th>Người gửi</th>
              <th>Số hiệu văn bản</th>
              <th>Độ mật</th>
              <th>Độ khẩn</th>
              <th>Nơi nhận</th>
              <th>Đơn vị nhận</th>
              <th>Đơn vị trực thuộc nhận</th>
              <th>Người nhận</th>
              <th>Địa chỉ nhận</th>
              <th>Tình trạng</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-row>
            <tr [pSelectableRow]="row">
              <td style="text-align:center">{{checkTypeLetter(row.type)}}</td>
              <td>{{row.letterCode?.name}}</td>
              <td>{{row.code}}</td>
              <td>{{row.inputDate}}</td>
              <td>{{row.sendDate}}</td>
              <td>{{row.affiliatedSendUnit?.name}}</td>
              <td>{{row.sender?.fullName}}</td>
              <td>{{row.textCode}}</td>
              <td>{{row.securityLevel?.name}}</td>
              <td>{{row.urgencyLevel?.name}}</td>
              <td>{{row.receivePlace?.name}}</td>
              <td>{{row.receiveUnit?.name}}</td>
              <td>{{row.affiliatedReceiveUnit?.name}}</td>
              <td>{{row.recipient?.fullName}}</td>
              <td>{{row.receiveAddress}}</td>
              <td>{{row.status }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </p-fieldset>
</p-fieldset>







